(this["webpackJsonpjoarnal-app"]=this["webpackJsonpjoarnal-app"]||[]).push([[0],{184:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n(42),r=n.n(c),o=n(14),s=n(0),i=n.n(s),u=n(1),l=n(13),j=n(23),d=n(33),b=n(15),p=n(54),O=n(55),f=n(76),h=(Object(f.a)({apiKey:"AIzaSyD5Nu1wXRXYoa84l1YK9YZrLtn7gbTOjJs",authDomain:"journal-app-react-20aea.firebaseapp.com",projectId:"journal-app-react-20aea",storageBucket:"journal-app-react-20aea.appspot.com",messagingSenderId:"248623006180",appId:"1:248623006180:web:0a12f266c389fceb2147f1"}),Object(p.a)()),m=new O.a,x="[Auth] Login",v="[Auth] Logout",g="[Ui] Set Error",y="[Ui] Remove Error",_="[Ui] Start Loading",N="[Ui] Finish Loading",w="[Notes] New note",k="[Notes] Set active note",C="[Notes] Load note",E="[Notes] Updated note",S="[Notes] Delete note",I="[Notes] Logout Cleaning",L=function(e){return{type:g,payload:e}},D=function(){return{type:N}},U=n(32),P=n.n(U),R=n(12),T=n(27),z=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.e)(Object(T.g)(Object(T.b)(h,"".concat(t,"/journal/notes"))));case 2:return n=e.sent,a=[],n.forEach((function(e){a.push(Object(R.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/dpi1phz6t/upload",(n=new FormData).append("upload_preset","react-joarnal"),n.append("file",t),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/dpi1phz6t/upload",{method:"POST",body:n});case 7:if(!(a=e.sent).ok){e.next=13;break}return c=a.json(),e.abrupt("return",c);case 13:return e.next=15,a.json();case 15:throw e.sent;case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(4),e.t0;case 21:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(e,t){return{type:w,payload:Object(R.a)({id:e},t)}},M=function(e,t){return{type:k,payload:Object(R.a)({id:e},t)}},X=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e);case 2:a=t.sent,n(B(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},B=function(e){return{type:C,payload:e}},J=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n,a){var c,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().auth.uid,e.url||delete e.url,delete(r=Object(R.a)({},e)).id,o=Object(T.d)(h,"".concat(c,"/journal/notes/").concat(e.id)),t.next=7,Object(T.h)(o,r);case 7:n(F(e.id,r)),P.a.fire("Saved",e.title,"success");case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},F=function(e,t){return{type:E,payload:{id:e,note:Object(R.a)({id:e},t)}}},G=function(e){return{type:S,payload:e}},K=function(e,t){return function(n){var a=Object(j.c)();n({type:_}),Object(j.e)(a,t,e).then((function(e){var t=e.user;n(q(t.uid,t.displayName)),n(D())})).catch((function(e){console.log(e),P.a.fire("Error","Usuario no encontrado","error"),n(D())}))}},q=function(e,t){return{type:x,payload:{uid:e,displayName:t}}},Q=function(){return function(e){var t=Object(j.c)();Object(j.g)(t),e(V()),e({type:I})}},V=function(){return{type:v}},Z=n(4),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(l.a)(t,2),c=n[0],r=n[1],o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;r(t)},s=function(e){var t=e.target;r(Object(R.a)(Object(R.a)({},c),{},Object(Z.a)({},t.name,t.value)))};return[c,s,o]},W=n(45),$=n.n(W),ee=n(6),te=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notes})).active,n=$()(t.date).format("MMM Do YY");return Object(ee.jsxs)("div",{className:"notes__appbar",children:[Object(ee.jsx)("span",{children:n}),Object(ee.jsx)("input",{type:"file",name:"",id:"fileSelector",style:{display:"none"},onChange:function(t){var n=t.target.files;n&&e(function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n,a){var c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().notes.active,P.a.fire({title:"Actualizando...",text:"Espere...",allowOutsideClick:!1,didOpen:function(){P.a.showLoading()}}),t.next=4,A(e);case 4:r=t.sent,c.url=r.url,n(J(c)),P.a.close();case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(n[0]))}}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("button",{className:"btn",onClick:function(){document.querySelector("#fileSelector").click()},children:"Picture"}),Object(ee.jsx)("button",{className:"btn",onClick:function(){e(J(t))},children:"Save"})]})]})},ne=function(){var e=Object(o.c)((function(e){return e.notes})).active,t=H(e),n=Object(l.a)(t,3),c=n[0],r=n[1],s=n[2],j=c.title,d=c.body,b=c.id,p=Object(a.useRef)(e.id),O=Object(o.b)();Object(a.useEffect)((function(){e.id!==p.current&&(s(e),p.current=e.id)}),[e,s]),Object(a.useEffect)((function(){O(M(c.id,Object(R.a)({},c)))}),[c,O]);return Object(ee.jsxs)("div",{className:"notes__main-content",children:[Object(ee.jsx)(te,{}),Object(ee.jsxs)("div",{className:"notes__content",children:[Object(ee.jsx)("input",{type:"text",placeholder:"Titulo",className:"notes__title-input",autoComplete:"off",name:"title",value:j,onChange:r}),Object(ee.jsx)("textarea",{placeholder:"Que paso hoy?",className:"notes__textarea",autoComplete:"off",name:"body",value:d,onChange:r})]}),e.url&&Object(ee.jsx)("div",{className:"notes__image",children:Object(ee.jsx)("img",{src:e.url,alt:"mandarina"})}),Object(ee.jsx)("button",{className:"btn btn-danger",onClick:function(){O(function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n,a){var c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().auth.uid,r=Object(T.d)(h,"".concat(c,"/journal/notes/").concat(e)),t.next=4,Object(T.c)(r);case 4:n(G(e));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(b))},children:"Borrar"})]})},ae=function(){return Object(ee.jsxs)("div",{className:"nothing__main-content",children:[Object(ee.jsxs)("p",{children:["Selecciona",Object(ee.jsx)("br",{}),"o crea una entrada!!"]}),Object(ee.jsx)("i",{className:"far fa-star fa-4x mt-5"})]})},ce=function(e){var t=e.id,n=e.title,a=e.body,c=e.date,r=e.url,s=$()(c),i=Object(o.b)(),u={title:n,body:a,date:c,url:r};return Object(ee.jsxs)("div",{className:"journal__entry",onClick:function(){i(M(t,u))},children:[r&&Object(ee.jsx)("div",{className:"journal__entry-picture",style:{backgroundSize:"cover",backgroundImage:"url(".concat(r,")")}}),Object(ee.jsxs)("div",{className:"journal__entry-body",children:[Object(ee.jsx)("p",{className:"journal__entry-title",children:n}),Object(ee.jsx)("p",{className:"journal__entry-content",children:a})]}),Object(ee.jsxs)("div",{className:"journal__entry-date-box",children:[Object(ee.jsx)("span",{children:s.format("dddd")}),Object(ee.jsx)("h4",{children:s.format("Do")})]})]})},re=function(){var e=Object(o.c)((function(e){return e.notes})).notes;return Object(ee.jsx)("div",{className:"journal__entries",children:e.map((function(e){return Object(ee.jsx)(ce,Object(R.a)({},e),e.id)}))})},oe=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth})).name;return Object(ee.jsxs)("aside",{className:"journal__sidebar",children:[Object(ee.jsxs)("div",{className:"journal__sidebar-navbar",children:[Object(ee.jsxs)("h3",{className:"mt-5",children:[Object(ee.jsx)("i",{className:"far fa-moon"}),Object(ee.jsxs)("span",{children:[" ",t," "]})]}),Object(ee.jsx)("button",{className:"btn",onClick:function(){e(Q())},children:"Logout"})]}),Object(ee.jsxs)("div",{className:"journal__new-entry",onClick:function(){e(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().auth.uid,c={title:"",body:"",date:(new Date).getTime()},e.next=4,Object(T.a)(Object(T.b)(h,"".concat(a,"/journal/notes")),c);case 4:r=e.sent,t(M(r.id,c)),t(Y(r.id,c));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},children:[Object(ee.jsx)("i",{className:"far fa-calendar-plus fa-5x"}),Object(ee.jsx)("p",{className:"mt-5",children:"New Entry"})]}),Object(ee.jsx)(re,{})]})},se=function(){var e=Object(o.c)((function(e){return e.notes})).active;return Object(ee.jsxs)("div",{className:"journal__main-content",children:[Object(ee.jsx)(oe,{}),Object(ee.jsx)("main",{children:e?Object(ee.jsx)(ne,{}):Object(ee.jsx)(ae,{})})]})},ie=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.ui})).loading,n=H({email:"",password:""}),a=Object(l.a)(n,2),c=a[0],r=a[1],s=c.email,i=c.password;return Object(ee.jsxs)("div",{children:[Object(ee.jsx)("h3",{className:"auth__title mb-5",children:"Login"}),Object(ee.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(K(i,s))},children:[Object(ee.jsx)("input",{type:"email",name:"email",value:s,onChange:r,placeholder:"Email",className:"auth__input",autoComplete:"off"}),Object(ee.jsx)("input",{type:"password",name:"password",value:i,onChange:r,placeholder:"Password",className:"auth__input"}),Object(ee.jsx)("button",{disabled:t,type:"submit",className:"btn btn-primary btn-block",children:"Login"}),Object(ee.jsxs)("div",{className:"auth__social-networks",children:[Object(ee.jsx)("p",{children:"Login with social networks"}),Object(ee.jsxs)("div",{className:"google-btn",children:[Object(ee.jsx)("div",{className:"google-icon-wrapper",children:Object(ee.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})}),Object(ee.jsx)("p",{className:"btn-text",onClick:function(){e((function(e){var t=Object(j.c)();Object(j.f)(t,m).then((function(t){var n=t.user;e(q(n.uid,n.displayName))}))}))},children:Object(ee.jsx)("b",{children:"Sign in with google"})})]})]}),Object(ee.jsx)(d.b,{to:"/auth/register",className:"links",children:"Create new account"})]})]})},ue=n(78),le=n.n(ue),je=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.ui})).msgError,n=H({name:"",email:"",password:null,password2:null}),a=Object(l.a)(n,2),c=a[0],r=a[1],s=c.name,b=c.email,p=c.password,O=c.password2,f=function(){return 0===s.trim().length?(e(L("Ingrese un Nombre")),!1):le.a.isEmail(b)?p!==O||p.length<5?(e(L("Contrase\xf1a no coincide o tiene menos de 6 caracteres")),!1):(e({type:y}),!0):(e(L("Email no valido")),!1)};return Object(ee.jsxs)("div",{children:[Object(ee.jsx)("h3",{className:"auth__title mb-5",children:"Register"}),t&&Object(ee.jsx)("div",{className:"auth__alert-error",children:t}),Object(ee.jsxs)("form",{onSubmit:function(t){t.preventDefault(),f()&&e(function(e,t,n){return function(a){var c=Object(j.c)();Object(j.b)(c,e,t).then(function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.user,e.next=3,Object(j.h)(c.currentUser,{displayName:n});case 3:a(q(r.uid,r.displayName));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){P.a.fire("Error",e.message,"error"),console.log(e)}))}}(b,p,s))},children:[Object(ee.jsx)("input",{type:"text",name:"name",placeholder:"Name",className:"auth__input",autoComplete:"off",value:s,onChange:r}),Object(ee.jsx)("input",{type:"email",name:"email",placeholder:"Email",className:"auth__input",autoComplete:"off",value:b,onChange:r}),Object(ee.jsx)("input",{type:"password",name:"password",placeholder:"Password",className:"auth__input",value:p,onChange:r}),Object(ee.jsx)("input",{type:"password",name:"password2",placeholder:"Confirm Password",className:"auth__input",value:O,onChange:r}),Object(ee.jsx)("button",{type:"submit",className:"btn btn-primary btn-block mb-5",children:"Register"}),Object(ee.jsx)(d.b,{to:"/auth/login",className:"links ",children:"Already registered?"})]})]})},de=function(){return Object(ee.jsx)("div",{className:"auth__main",children:Object(ee.jsx)("div",{className:"auth__box-container",children:Object(ee.jsxs)(b.d,{children:[Object(ee.jsx)(b.b,{exact:!0,path:"/auth/login",component:ie}),Object(ee.jsx)(b.b,{exact:!0,path:"/auth/register",component:je}),Object(ee.jsx)(b.a,{to:"/auth/login"})]})})})},be=n(46),pe=["loggedIn","component"],Oe=function(e){var t=e.loggedIn,n=e.component,a=Object(be.a)(e,pe);return Object(ee.jsx)(b.b,Object(R.a)(Object(R.a)({},a),{},{component:function(e){return t?Object(ee.jsx)(n,Object(R.a)({},e)):Object(ee.jsx)(b.a,{to:"/auth/login"})}}))},fe=["loggedIn","component"],he=function(e){var t=e.loggedIn,n=e.component,a=Object(be.a)(e,fe);return Object(ee.jsx)(b.b,Object(R.a)(Object(R.a)({},a),{},{component:function(e){return t?Object(ee.jsx)(b.a,{to:"/"}):Object(ee.jsx)(n,Object(R.a)({},e))}}))},me=function(){var e=Object(o.b)(),t=Object(a.useState)(!0),n=Object(l.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),p=Object(l.a)(s,2),O=p[0],f=p[1];return Object(a.useEffect)((function(){var t=Object(j.c)();Object(j.d)(t,function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===n||void 0===n?void 0:n.uid)?(e(q(n.uid,n.displayName)),f(!0),e(X(n.uid))):f(!1),r(!1);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e]),c?Object(ee.jsx)("h1",{children:"...Espere"}):Object(ee.jsx)(d.a,{children:Object(ee.jsx)("div",{children:Object(ee.jsxs)(b.d,{children:[Object(ee.jsx)(he,{path:"/auth",component:de,loggedIn:O}),Object(ee.jsx)(Oe,{exact:!0,path:"/",component:se,loggedIn:O}),Object(ee.jsx)(b.a,{to:"/auth/login"})]})})})},xe=n(40),ve=n(79),ge=n(21),ye={notes:[],active:null},_e={loading:!1,msgError:null},Ne=Object(xe.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return{uid:t.payload.uid,name:t.payload.displayName};case v:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(R.a)(Object(R.a)({},e),{},{msgError:t.payload});case y:return Object(R.a)(Object(R.a)({},e),{},{msgError:null});case _:return Object(R.a)(Object(R.a)({},e),{},{loading:!0});case N:return Object(R.a)(Object(R.a)({},e),{},{loading:!1});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(R.a)(Object(R.a)({},e),{},{active:Object(R.a)({},t.payload)});case w:return Object(R.a)(Object(R.a)({},e),{},{notes:[t.payload].concat(Object(ge.a)(e.notes))});case C:return Object(R.a)(Object(R.a)({},e),{},{notes:Object(ge.a)(t.payload)});case E:return Object(R.a)(Object(R.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload.note:e}))});case S:return Object(R.a)(Object(R.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload}))});case I:return Object(R.a)(Object(R.a)({},e),{},{notes:[],active:null});default:return e}}}),we="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||xe.c,ke=Object(xe.d)(Ne,we(Object(xe.a)(ve.a))),Ce=function(){return Object(ee.jsx)(o.a,{store:ke,children:Object(ee.jsx)(me,{})})};n(184);r.a.render(Object(ee.jsx)(Ce,{}),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.078d6c03.chunk.js.map